{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst SpeechSynthesis = registerPlugin('SpeechSynthesis', {\n    web: () => import('./web').then((m) => new m.SpeechSynthesisWeb()),\n});\nexport * from './definitions';\nexport { SpeechSynthesis };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class SpeechSynthesisWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.utteranceIdCounter = 0;\n        this.currentUtterances = new Map();\n    }\n    async speak(options) {\n        if (!('speechSynthesis' in window)) {\n            throw new Error('Speech synthesis not supported in this browser');\n        }\n        const utteranceId = `web-utterance-${++this.utteranceIdCounter}`;\n        const utterance = new SpeechSynthesisUtterance(options.text);\n        // Set voice if specified\n        if (options.voiceId) {\n            const voices = window.speechSynthesis.getVoices();\n            const voice = voices.find((v) => v.voiceURI === options.voiceId || v.name === options.voiceId);\n            if (voice) {\n                utterance.voice = voice;\n            }\n        }\n        else if (options.language) {\n            const voices = window.speechSynthesis.getVoices();\n            const voice = voices.find((v) => v.lang === options.language);\n            if (voice) {\n                utterance.voice = voice;\n            }\n            utterance.lang = options.language;\n        }\n        // Set speech parameters\n        if (options.pitch !== undefined) {\n            utterance.pitch = Math.max(0, Math.min(2, options.pitch));\n        }\n        if (options.rate !== undefined) {\n            utterance.rate = Math.max(0.1, Math.min(10, options.rate));\n        }\n        if (options.volume !== undefined) {\n            utterance.volume = Math.max(0, Math.min(1, options.volume));\n        }\n        // Set up event listeners\n        utterance.onstart = () => {\n            this.notifyListeners('start', { utteranceId });\n        };\n        utterance.onend = () => {\n            this.currentUtterances.delete(utteranceId);\n            this.notifyListeners('end', { utteranceId });\n        };\n        utterance.onboundary = (event) => {\n            this.notifyListeners('boundary', {\n                utteranceId,\n                charIndex: event.charIndex,\n                charLength: event.charLength,\n            });\n        };\n        utterance.onerror = (event) => {\n            this.currentUtterances.delete(utteranceId);\n            this.notifyListeners('error', {\n                utteranceId,\n                error: event.error || 'Unknown error',\n            });\n        };\n        // Handle queue strategy\n        if (options.queueStrategy === 'Flush') {\n            window.speechSynthesis.cancel();\n            this.currentUtterances.clear();\n        }\n        this.currentUtterances.set(utteranceId, utterance);\n        window.speechSynthesis.speak(utterance);\n        return { utteranceId };\n    }\n    async synthesizeToFile(_options) {\n        throw new Error('synthesizeToFile is not supported on web platform');\n    }\n    async cancel() {\n        if ('speechSynthesis' in window) {\n            window.speechSynthesis.cancel();\n            this.currentUtterances.clear();\n        }\n    }\n    async pause() {\n        if ('speechSynthesis' in window) {\n            window.speechSynthesis.pause();\n        }\n    }\n    async resume() {\n        if ('speechSynthesis' in window) {\n            window.speechSynthesis.resume();\n        }\n    }\n    async isSpeaking() {\n        if ('speechSynthesis' in window) {\n            return { isSpeaking: window.speechSynthesis.speaking };\n        }\n        return { isSpeaking: false };\n    }\n    async isAvailable() {\n        return { isAvailable: 'speechSynthesis' in window };\n    }\n    async getVoices() {\n        if (!('speechSynthesis' in window)) {\n            return { voices: [] };\n        }\n        const webVoices = window.speechSynthesis.getVoices();\n        const voices = webVoices.map((voice) => ({\n            id: voice.voiceURI,\n            name: voice.name,\n            language: voice.lang,\n            isNetworkConnectionRequired: !voice.localService,\n            default: voice.default,\n        }));\n        return { voices };\n    }\n    async getLanguages() {\n        if (!('speechSynthesis' in window)) {\n            return { languages: [] };\n        }\n        const webVoices = window.speechSynthesis.getVoices();\n        const languages = Array.from(new Set(webVoices.map((voice) => voice.lang)));\n        return { languages };\n    }\n    async isLanguageAvailable(options) {\n        if (!('speechSynthesis' in window)) {\n            return { isAvailable: false };\n        }\n        const webVoices = window.speechSynthesis.getVoices();\n        const isAvailable = webVoices.some((voice) => voice.lang === options.language);\n        return { isAvailable };\n    }\n    async isVoiceAvailable(options) {\n        if (!('speechSynthesis' in window)) {\n            return { isAvailable: false };\n        }\n        const webVoices = window.speechSynthesis.getVoices();\n        const isAvailable = webVoices.some((voice) => voice.voiceURI === options.voiceId || voice.name === options.voiceId);\n        return { isAvailable };\n    }\n    async initialize() {\n        // Pre-load voices on web\n        if ('speechSynthesis' in window) {\n            window.speechSynthesis.getVoices();\n        }\n    }\n    async activateAudioSession(_options) {\n        // Not applicable on web\n    }\n    async deactivateAudioSession() {\n        // Not applicable on web\n    }\n    async getPluginVersion() {\n        return { version: 'web' };\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}